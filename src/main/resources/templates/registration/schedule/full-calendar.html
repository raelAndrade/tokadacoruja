<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Calendário</title>
	
	
	<link href='/css/fullcalendar.min.css' rel='stylesheet' />
	<link href='/css/fullcalendar.print.min.css' rel='stylesheet' media='print' />
	<script src='/js/moment.min.js'></script>
	<script src='/js/jquery.min.js'></script>
	<script src='/js/fullcalendar.min.js'></script>
	
	<style>
	body {
		margin: 40px 10px;
		padding: 0;
		font-family: "Lucida Grande", Helvetica, Arial, Verdana, sans-serif;
		font-size: 14px;
	}
	
	#calendar {
		max-width: 900px;
		margin: 0 auto;
	}
	</style>

</head>
<body>
	<h1>Calendário</h1>
	
	<div id='calendar'></div>
</body>


<script>
	
	$(document).ready(function() {
		moment().format('YYYY-dd-MM');
		
		$.get("http://localhost:8081/agendas/full-calendar", function(response) {
		
	      var datas = JSON.stringify(response);
	      var data = $.parseJSON(datas);
	      console.log(datas);
	      var schedule = data.map((item) => {
	    	  return {
	    		  title : item.payment,
	    		  start : item.date
	    	  }
	      });
	      
	      console.log(schedule);
	      
				$('#calendar').fullCalendar({
					monthNames: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
				    monthNamesShort: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
				    dayNames: ['Domingo', 'Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sabado'],
				    dayNamesShort: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sab'],
				    buttonText: {
				    	today: "Hoje",
				        month: "Mês",
				        week: "Semana",
				        day: "Dia"
				    },
					header: {
						left: 'prev,next today',
						center: 'title',
						right: 'month,basicWeek,basicDay'
					},
					defaultDate: new Date(),
					navLinks: true,
					editable: true,
					eventLimit: true,
					events: 
						schedule							
				});
		
	 });
		
	});

</script>
</html>